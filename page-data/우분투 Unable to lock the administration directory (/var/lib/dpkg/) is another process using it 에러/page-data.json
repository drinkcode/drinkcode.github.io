{
    "componentChunkName": "component---src-templates-markdown-template-tsx",
    "path": "/우분투 Unable to lock the administration directory (/var/lib/dpkg/) is another process using it 에러",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"우분투 Unable to lock the administration directory (/var/lib/dpkg/) is another process using it 에러","tags":["리눅스","에러모음"],"created":"2019-12-17T18:03:25.671Z","modified":"2021-01-06T21:43:30.041Z"},"html":"<p><img src=\"./images/terminal.jpeg\" alt=\"\"></p>\n<h1 id=\"우분투-unable-to-lock-the-administration-directory-varlibdpkg-is-another-process-using-it-에러\" style=\"position:relative;\"><a href=\"#%EC%9A%B0%EB%B6%84%ED%88%AC-unable-to-lock-the-administration-directory-varlibdpkg-is-another-process-using-it-%EC%97%90%EB%9F%AC\" aria-label=\"우분투 unable to lock the administration directory varlibdpkg is another process using it 에러 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>우분투 Unable to lock the administration directory (/var/lib/dpkg/) is another process using it 에러</h1>\n<p>First of all we should check what process created the lock file using <code class=\"language-text\">lsof</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo lsof /var/lib/dpkg/lock\n</code></pre></div>\n<p>or in another situation where <code class=\"language-text\">/var/lib/apt/lists/lock</code> is problematic:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo lsof /var/lib/apt/lists/lock\n</code></pre></div>\n<p>The output will be close to something like:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF    NODE NAME\napt-get   12127 root   4uW  REG  252,1        0    86   /var/lib/apt/lists/lock\n</code></pre></div>\n<p>Then we should check what the commad is doing, we can find it out using <code class=\"language-text\">ps</code>, <code class=\"language-text\">pgrep</code> etc; the command is <code class=\"language-text\">apt-get</code> so I run:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">pgrep apt-get -a\n</code></pre></div>\n<p>The <code class=\"language-text\">-a</code> switch lists the full command for me, in my case it's:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> pgrep -a apt-get\n 12127 apt-get update\n</code></pre></div>\n<p>we can see that it's running <code class=\"language-text\">update</code> subcommand, I could run something like this too:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ps -f 12127\n</code></pre></div>\n<p>which produces:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">UID        PID  PPID  C STIME TTY      STAT   TIME CMD\nroot     12127 12126  0 09:39 pts/0    S+     0:00 apt-get update\n</code></pre></div>\n<p>In this case I would wait for some minute for resource to be freed and if after 2 or 3 minute problem still exist or the command was something that I didn't care about or was not harmful for system (like this <code class=\"language-text\">apt-get update</code>) I send a <code class=\"language-text\">SIGTERM</code> to the process:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo kill -15 12127\n</code></pre></div>\n<p>It should do the work, If it didn't I'm going to send <code class=\"language-text\">SIGINT</code> this time (It's like pressing CTRL+C):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo kill -2 12127\n</code></pre></div>\n<p>If it didn't work too, we should send an <code class=\"language-text\">SIGHUP</code> (<code class=\"language-text\">kill -1</code>), and finally if nothing works I simply kill the process:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo kill -9 12127\n</code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo pkill -9 apt-get\n</code></pre></div>\n<p>Then I remove busy resources:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo rm /var/lib/apt/lists/lock</code></pre></div>","tableOfContents":"<ul>\n<li><a href=\"#%EC%9A%B0%EB%B6%84%ED%88%AC-unable-to-lock-the-administration-directory-varlibdpkg-is-another-process-using-it-%EC%97%90%EB%9F%AC\">우분투 Unable to lock the administration directory (/var/lib/dpkg/) is another process using it 에러</a></li>\n</ul>"}}]},"allFile":{"nodes":[{"base":"random3.jpeg","absolutePath":"/Users/tdlab/Dropbox/athi_ts/static/randomImg/random3.jpeg"},{"base":"random2.jpeg","absolutePath":"/Users/tdlab/Dropbox/athi_ts/static/randomImg/random2.jpeg"},{"base":"random4.jpeg","absolutePath":"/Users/tdlab/Dropbox/athi_ts/static/randomImg/random4.jpeg"},{"base":"random1.jpeg","absolutePath":"/Users/tdlab/Dropbox/athi_ts/static/randomImg/random1.jpeg"}]}},"pageContext":{"title":"우분투 Unable to lock the administration directory (/var/lib/dpkg/) is another process using it 에러"}},
    "staticQueryHashes": []}